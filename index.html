<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy San Valentino, Amore ðŸ’˜</title>
  <style>
    :root{
      --bg1:#ffe6ef;
      --bg2:#fff7fb;
      --card:#ffffffcc;
      --ink:#3a2c34;
      --muted:#7a5d6a;
      --pink:#ff4d88;
      --pink2:#ff77a8;
      --shadow: 0 18px 45px rgba(255,77,136,.18);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      min-height:100vh;
      background:
        radial-gradient(1200px 800px at 30% 10%, #ffd3e3 0%, transparent 60%),
        radial-gradient(900px 700px at 80% 30%, #ffd9ee 0%, transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex;
      justify-content:center;
      padding:28px 14px 60px;
    }
    .app{ width:min(860px, 100%); }
    header{ text-align:center; margin-bottom:18px; }
    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:999px;
      background:linear-gradient(90deg, #fff, #fff0f6);
      box-shadow: 0 10px 26px rgba(255,77,136,.12);
      border:1px solid rgba(255,77,136,.15);
      color:var(--muted); font-weight:600; font-size:14px;
    }
    h1{
      margin:14px 0 8px;
      font-size:clamp(28px, 4.2vw, 44px);
      line-height:1.05;
      letter-spacing:-.02em;
    }
    .subtitle{
      margin:0 auto; max-width:54ch;
      color:var(--muted);
      font-size:16px; line-height:1.5;
    }

    .panel{
      margin-top:18px;
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,77,136,.15);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .tabs{
      display:flex; gap:8px; padding:10px;
      background:linear-gradient(180deg, rgba(255,77,136,.08), transparent);
    }
    .tab{
      flex:1; border:0; border-radius:14px;
      padding:12px 10px; font-weight:800;
      cursor:pointer;
      background:rgba(255,255,255,.8);
      color:var(--muted);
      transition:.2s transform, .2s background, .2s color;
      box-shadow: 0 8px 18px rgba(0,0,0,.04);
    }
    .tab[aria-selected="true"]{
      background:linear-gradient(90deg, var(--pink), var(--pink2));
      color:white;
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(255,77,136,.22);
    }
    .view{ padding:18px; }

    /* Game */
    .hint{
      text-align:center;
      color:var(--muted);
      margin:0 0 12px;
      font-weight:700;
    }
    .stats{
      display:flex; justify-content:center; gap:10px;
      margin-bottom:14px; flex-wrap:wrap;
    }
    .pill{
      padding:8px 12px; border-radius:999px;
      background:rgba(255,255,255,.75);
      border:1px solid rgba(255,77,136,.14);
      color:var(--muted);
      font-weight:800; font-size:13px;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap:12px;
      width:min(520px, 100%);
      margin:0 auto;
    }
    .cardbtn{
      aspect-ratio: 1/1;
      border-radius:16px;
      border:1px solid rgba(255,77,136,.18);
      background:rgba(255,255,255,.8);
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(0,0,0,.04);
      font-size:26px;
      font-weight:900;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:.18s transform, .18s box-shadow, .18s background;
      user-select:none;
    }
    .cardbtn:hover{ transform: translateY(-1px); }
    .cardbtn.revealed{
      background: linear-gradient(180deg, rgba(255,77,136,.20), rgba(255,255,255,.85));
    }
    .cardbtn.matched{
      background: linear-gradient(90deg, rgba(255,77,136,.85), rgba(255,119,168,.85));
      color:white;
      border-color: rgba(255,77,136,.35);
      box-shadow: 0 16px 32px rgba(255,77,136,.22);
      cursor:default;
      transform:none;
    }
    .cardbtn:disabled{ opacity:.92; }

    .ctaRow{
      display:flex; justify-content:center; gap:10px;
      margin-top:16px; flex-wrap:wrap;
    }
    .btn{
      border:0; border-radius:999px;
      padding:12px 18px; font-weight:900;
      cursor:pointer; color:white;
      background: linear-gradient(90deg, var(--pink), var(--pink2));
      box-shadow: 0 14px 28px rgba(255,77,136,.24);
      transition: .18s transform, .18s box-shadow;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 18px 34px rgba(255,77,136,.28); }
    .btn.secondary{
      background: rgba(255,255,255,.8);
      color: var(--muted);
      border:1px solid rgba(255,77,136,.18);
      box-shadow: 0 10px 20px rgba(0,0,0,.04);
    }
    .success{
      text-align:center;
      margin-top:14px;
      font-weight:1000;
      color: var(--pink);
      display:none;
    }
    .success.show{ display:block; }

    /* Reasons */
    .reasonsWrap{ max-width:720px; margin:0 auto; }
    .reason{
      display:flex; gap:12px; align-items:flex-start;
      padding:14px; border-radius:16px;
      background:rgba(255,255,255,.78);
      border:1px solid rgba(255,77,136,.14);
      margin:10px 0;
      box-shadow: 0 10px 22px rgba(0,0,0,.03);
      cursor:pointer;
      transition:.18s transform;
      position:relative;
      overflow:hidden;
    }
    .reason:hover{ transform: translateY(-1px); }
    .heart{
      width:34px; height:34px; border-radius:12px;
      background: linear-gradient(90deg, rgba(255,77,136,.20), rgba(255,119,168,.20));
      display:flex; align-items:center; justify-content:center;
      font-size:18px; flex:0 0 auto;
      border:1px solid rgba(255,77,136,.18);
      z-index: 3;
    }

    /* NEW: hide actual content until revealed */
    .reason .content{
      opacity: 0;
      filter: blur(10px);
      transform: translateY(2px);
      transition: .25s opacity, .25s filter, .25s transform;
      z-index: 1;
    }
    .reason.revealed .content{
      opacity: 1;
      filter: blur(0);
      transform: translateY(0);
    }

    .rtitle{ margin:1px 0 3px; font-weight:1000; }
    .rbody{ margin:0; color:var(--muted); line-height:1.45; }

    .reason .mask{
      position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(255,77,136,.15), rgba(255,119,168,.12));
      display:flex; align-items:center; justify-content:center;
      color:var(--muted);
      font-weight:1000;
      letter-spacing:.02em;
      opacity:1;
      transition: .25s opacity;
      z-index: 2;
    }
    .reason.revealed .mask{ opacity:0; pointer-events:none; }

    /* Letter */
    .letterBox{
      max-width:720px; margin:0 auto;
      padding:18px; border-radius:18px;
      background:rgba(255,255,255,.78);
      border:1px solid rgba(255,77,136,.14);
      box-shadow: 0 12px 28px rgba(0,0,0,.04);
      overflow:hidden;
    }
    .noteTop{
      display:flex; align-items:center; gap:10px;
      margin-bottom:10px;
      color:var(--muted);
      font-weight:900;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(90deg, var(--pink), var(--pink2));
      box-shadow: 0 8px 16px rgba(255,77,136,.24);
    }
    .type{
      font-size:18px;
      line-height:1.6;
      white-space:pre-wrap;
    }
    .sig{
      margin-top:14px;
      font-weight:1000;
      color:var(--pink);
    }

    /* Floating hearts */
    .floaty{
      position:fixed; inset:0;
      pointer-events:none; overflow:hidden;
    }
    .floaty span{
      position:absolute;
      font-size:18px;
      opacity:0;
      animation: floatUp 2.8s ease-out forwards;
      filter: drop-shadow(0 10px 10px rgba(255,77,136,.2));
    }
    @keyframes floatUp{
      0%{ transform: translateY(20px) scale(.9); opacity:0; }
      15%{ opacity:1; }
      100%{ transform: translateY(-140px) scale(1.15); opacity:0; }
    }

    @media (max-width:520px){
      .grid{ gap:10px; }
      .cardbtn{ border-radius:14px; font-size:24px; }
      .view{ padding:14px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="badge">ðŸ’Œ <span id="badgeText">For Amore, with ridiculous love</span></div>
      <h1 id="headline">Happy San Valentino, <span id="herName">Amore</span> ðŸ’˜</h1>
      <p class="subtitle" id="subtitle">
        First, a little game. Then, a few reasons. Then, a message I probably shouldâ€™ve handwritten, but technology is my love language too.
      </p>
    </header>

    <section class="panel">
      <div class="tabs" role="tablist" aria-label="Sections">
        <button class="tab" role="tab" aria-selected="true" data-view="game">Game</button>
        <button class="tab" role="tab" aria-selected="false" data-view="reasons">Reasons</button>
        <button class="tab" role="tab" aria-selected="false" data-view="letter">Message</button>
      </div>

      <div class="view" id="view-game">
        <p class="hint" id="gameHint">Letâ€™s play a little game before your surprise, Amore âœ¨</p>

        <div class="stats">
          <div class="pill">Moves: <span id="moves">0</span></div>
          <div class="pill">Matches: <span id="matches">0</span>/8</div>
        </div>

        <div class="grid" id="grid" aria-label="Memory game grid"></div>

        <div class="success" id="winMsg">Yay! You found all the pairs ðŸŽ‰</div>

        <div class="ctaRow">
          <button class="btn secondary" id="restart">Shuffle & restart</button>
          <button class="btn" id="continue" disabled>Continue â†’</button>
        </div>
      </div>

      <div class="view" id="view-reasons" hidden>
        <p class="hint">Tap each heart to reveal one reason.</p>
        <div class="reasonsWrap" id="reasonsWrap"></div>
        <div class="ctaRow">
          <button class="btn secondary" id="revealAll">Reveal all ðŸ’—</button>
          <button class="btn" id="toLetter">Continue â†’</button>
        </div>
      </div>

      <div class="view" id="view-letter" hidden>
        <div class="letterBox">
          <div class="noteTop"><span class="dot"></span> <span id="noteLabel">One last thingâ€¦</span></div>
          <div class="type" id="typed"></div>
          <div class="sig" id="signature"></div>
        </div>
        <div class="ctaRow">
          <button class="btn secondary" id="retype">Replay message</button>
          <button class="btn" id="hearts">Make it extra cute ðŸ’ž</button>
        </div>
      </div>
    </section>
  </div>

  <div class="floaty" id="floaty"></div>

  <script>
    /**********************
     * CUSTOM SETTINGS ðŸ’˜
     **********************/
    const CONFIG = {
      herName: "Amore",
      yourName: "Rebecca",
      badgeText: "For Amore, with ridiculous love",
      headline: "Happy San Valentino, {name} ðŸ’˜",
      subtitle:
        "First, a little game. Then, a few reasons. Then, a message I probably shouldâ€™ve handwritten, but technology is my love language too.",
      gameIntro: "Letâ€™s play a little game before your surprise, Amore âœ¨",
      reasons: [
        { title: "Your dedication", text: "You donâ€™t give up, even when things get hard." },
        { title: "Your tenderness", text: "You make me feel loved in a way thatâ€™s quiet and real." },
        { title: "Your humour", text: "You can make me laugh even when my brain is in spreadsheet mode." },
        { title: "Your beauty", text: "Not just outside â€” your soul is genuinely stunning." },
        { title: "Your heart", text: "The way you love is everything I want." },
        { title: "Our future", text: "I canâ€™t wait for all our tomorrows, messy and magical." },
        { title: "Your mind", text: "You make me think, and you make the world feel bigger." },
        { title: "Us", text: "With you, even ordinary days feel like a little miracle." },
      ],
      letterLines: [
        "Happy Valentineâ€™s Day, {name}.\n\n",
  "I wanted to write you something simple, because the way I feel about you is the most natural thing in the world.\n\n",
  "When I think about us, I don't just think about the big moments. I think about the quiet onesâ€”the way your hand feels in mine, the sound of your laugh, and the peace I feel whenever you walk into the room. You have this way of making everything feel soft and safe.\n\n",
  "Even though there is distance between us today, I want you to know that you are the first thing on my mind this morning and the last thing I think of at night. We have spent enough time counting down days and looking at each other through screens.\n\n",
  "It warms my heart to know that our \"long distance\" chapter is finally coming to a close. I am already dreaming of next year, when I won't have to say goodbye to you on a call, but can simply reach out and hold you. I truly cannot wait to spend every future Valentineâ€™s Dayâ€”and every day in betweenâ€”right by your side.\n\n",
  "Thank you for being my person. Thank you for your patience, your kindness, and for the beautiful way you see the world. Being loved by you is the greatest gift Iâ€™ve ever received.\n\n",
  "I love you, deeply and truly.\n\n",
  "Happy Valentineâ€™s Day,\n"
]

    };

    /**********************
     * Header Text
     **********************/
    document.getElementById("herName").textContent = CONFIG.herName;
    document.getElementById("badgeText").textContent = CONFIG.badgeText;
    document.getElementById("headline").textContent = CONFIG.headline.replace("{name}", CONFIG.herName);
    document.getElementById("subtitle").textContent = CONFIG.subtitle;
    document.getElementById("gameHint").textContent = CONFIG.gameIntro;

    /**********************
     * Tabs + Views
     **********************/
    const tabs = [...document.querySelectorAll(".tab")];
    const views = {
      game: document.getElementById("view-game"),
      reasons: document.getElementById("view-reasons"),
      letter: document.getElementById("view-letter")
    };

    function showView(which){
      for (const [k,v] of Object.entries(views)) v.hidden = k !== which;
      tabs.forEach(t => t.setAttribute("aria-selected", String(t.dataset.view === which)));
      if(which === "letter") typeLetter();
    }
    tabs.forEach(t => t.addEventListener("click", () => showView(t.dataset.view)));

    /**********************
     * Memory Game
     **********************/
    const icons = ["ðŸ’«","ðŸ’—","ðŸª½","ðŸŒ™","âœ¨","ðŸŒ¸","ðŸ«¶","ðŸ’Œ"]; // 8 pairs
    const grid = document.getElementById("grid");
    const movesEl = document.getElementById("moves");
    const matchesEl = document.getElementById("matches");
    const winMsg = document.getElementById("winMsg");
    const continueBtn = document.getElementById("continue");
    const restartBtn = document.getElementById("restart");

    let deck = [];
    let first = null;
    let lock = false;
    let moves = 0;
    let matches = 0;

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }

    function buildDeck(){
      deck = shuffle([...icons, ...icons]).map((val, idx) => ({
        id: idx, val, revealed: false, matched: false
      }));
    }

    function renderGrid(){
      grid.innerHTML = "";
      deck.forEach(card => {
        const b = document.createElement("button");
        b.className = "cardbtn";
        b.type = "button";
        b.setAttribute("aria-label", "card");
        b.dataset.id = card.id;

        b.textContent = (card.revealed || card.matched) ? card.val : "?";

        if(card.revealed) b.classList.add("revealed");
        if(card.matched) b.classList.add("matched");
        b.disabled = lock || card.matched;

        b.addEventListener("click", () => onFlip(card.id));
        grid.appendChild(b);
      });

      movesEl.textContent = String(moves);
      matchesEl.textContent = String(matches);
      winMsg.classList.toggle("show", matches === icons.length);
      continueBtn.disabled = matches !== icons.length;
    }

    function onFlip(id){
      if(lock) return;
      const card = deck.find(c => c.id === id);
      if(card.matched || card.revealed) return;

      card.revealed = true;

      if(!first){
        first = card;
        renderGrid();
        return;
      }

      moves += 1;
      lock = true;
      const second = card;

      if(first.val === second.val){
        setTimeout(() => {
          first.matched = true;
          second.matched = true;
          first.revealed = false;
          second.revealed = false;
          first = null;
          matches += 1;
          lock = false;
          renderGrid();
          if(matches === icons.length) burstHearts(18);
        }, 240);
      } else {
        setTimeout(() => {
          first.revealed = false;
          second.revealed = false;
          first = null;
          lock = false;
          renderGrid();
        }, 650);
      }
      renderGrid();
    }

    function resetGame(){
      moves = 0;
      matches = 0;
      first = null;
      lock = false;
      buildDeck();
      renderGrid();
      winMsg.classList.remove("show");
      continueBtn.disabled = true;
    }

    restartBtn.addEventListener("click", resetGame);
    continueBtn.addEventListener("click", () => showView("reasons"));
    resetGame();

    /**********************
     * Reasons (FIXED: hidden until tap)
     **********************/
    const reasonsWrap = document.getElementById("reasonsWrap");

    function renderReasons(){
      reasonsWrap.innerHTML = "";
      CONFIG.reasons.forEach((r) => {
        const row = document.createElement("div");
        row.className = "reason";

        const h = document.createElement("div");
        h.className = "heart";
        h.textContent = "â™¥";

        const content = document.createElement("div");
        content.className = "content";
        content.innerHTML = `<div class="rtitle">${r.title}</div><p class="rbody">${r.text}</p>`;

        const mask = document.createElement("div");
        mask.className = "mask";
        mask.textContent = "Tap to reveal";

        row.appendChild(h);
        row.appendChild(content);
        row.appendChild(mask);

        row.addEventListener("click", () => {
          row.classList.add("revealed");
          burstHearts(6);
        });

        reasonsWrap.appendChild(row);
      });
    }
    renderReasons();

    document.getElementById("revealAll").addEventListener("click", () => {
      document.querySelectorAll(".reason").forEach(r => r.classList.add("revealed"));
      burstHearts(14);
    });

    document.getElementById("toLetter").addEventListener("click", () => showView("letter"));

    /**********************
     * Letter typing
     **********************/
    const typed = document.getElementById("typed");
    const signature = document.getElementById("signature");
    const retypeBtn = document.getElementById("retype");
    const heartsBtn = document.getElementById("hearts");
    const noteLabel = document.getElementById("noteLabel");

    let typingTimer = null;

    function typeLetter(){
      if(typingTimer) clearInterval(typingTimer);
      typed.textContent = "";
      signature.textContent = "";
      noteLabel.textContent = "One last thingâ€¦";

      const full = CONFIG.letterLines.join("").replaceAll("{name}", CONFIG.herName);
      let i = 0;

      typingTimer = setInterval(() => {
        typed.textContent = full.slice(0, i);
        i += 1;
        if(i % 26 === 0) burstHearts(2);

        if(i > full.length){
          clearInterval(typingTimer);
          typingTimer = null;
          signature.textContent = `â€” ${CONFIG.yourName} ðŸ’˜`;
          burstHearts(10);
        }
      }, 18);
    }

    retypeBtn.addEventListener("click", typeLetter);
    heartsBtn.addEventListener("click", () => burstHearts(26));

    /**********************
     * Floating hearts
     **********************/
    const floaty = document.getElementById("floaty");
    const HEARTS = ["ðŸ’—","ðŸ’–","ðŸ’ž","ðŸ’˜","ðŸ’•","ðŸ’“"];

    function burstHearts(n=10){
      const { innerWidth: W, innerHeight: H } = window;
      for(let i=0;i<n;i++){
        const s = document.createElement("span");
        s.textContent = HEARTS[Math.floor(Math.random()*HEARTS.length)];
        const x = Math.random()*W;
        const y = (H * 0.75) + Math.random()*80;
        s.style.left = x + "px";
        s.style.top = y + "px";
        s.style.animationDelay = (Math.random()*0.25) + "s";
        floaty.appendChild(s);
        setTimeout(() => s.remove(), 3200);
      }
    }
  </script>
</body>
</html>
